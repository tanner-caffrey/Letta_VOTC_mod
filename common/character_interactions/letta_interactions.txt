# Create a Letta agent for a character
create_letta_agent_interaction = {
	category = interaction_category_friendly
	use_diplomatic_range = no
	ignores_pending_interaction_block = yes
	interface_priority = 199
	common_interaction = yes
	desc = create_letta_agent_interaction.desc

	ai_will_do = {
		base = 0
	}

	is_valid = {
		scope:actor = {
			is_available_adult = yes
		}
		scope:recipient = {
			is_available_adult = yes
		}
	}

	on_accept = {
		# Log agent creation marker FIRST to confirm interaction fires
		debug_log = "LETTA_INTERACTION_FIRED"
		debug_log = "VOTC:AGENT_CREATE/;/[scope:recipient.GetID]/;/[scope:recipient.GetTitledFirstName]"

		# Set global variables for character data logging
		set_global_variable = {
			name = talk_first_scope
			value = scope:actor
		}
		set_global_variable = {
			name = talk_second_scope
			value = scope:recipient
		}

		# Log full character data to debug log (same as VOTC:IN)
		scope:recipient = {
			log_gamedata = {}
		}

		# Trigger hidden event to copy to clipboard - trigger on recipient so ROOT = target character
		scope:recipient = {
			trigger_event = talk_event.9004
		}
	}

	auto_accept = yes
}
